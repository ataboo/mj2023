[gd_scene load_steps=16 format=2]

[ext_resource path="res://models/entity/mechleg.glb" type="PackedScene" id=1]
[ext_resource path="res://animations/KickWindup.tres" type="Animation" id=2]
[ext_resource path="res://animations/KickStrike.tres" type="Animation" id=3]
[ext_resource path="res://src/player/MechLegControl.cs" type="Script" id=4]
[ext_resource path="res://animations/KickIdle.tres" type="Animation" id=5]

[sub_resource type="CapsuleShape" id=10]
height = 1.89789

[sub_resource type="AnimationNodeAnimation" id=6]
animation = "KickIdle"

[sub_resource type="AnimationNodeAnimation" id=1]
animation = "KickStrike"

[sub_resource type="AnimationNodeAnimation" id=2]
animation = "KickWindup"

[sub_resource type="AnimationNodeStateMachineTransition" id=3]
switch_mode = 2
advance_condition = "kick"

[sub_resource type="AnimationNodeStateMachineTransition" id=7]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=8]
advance_condition = "windup"

[sub_resource type="AnimationNodeStateMachineTransition" id=9]
advance_condition = "not_windup"
xfade_time = 0.4
priority = 2

[sub_resource type="AnimationNodeStateMachine" id=4]
states/KickIdle/node = SubResource( 6 )
states/KickIdle/position = Vector2( 711.667, 351 )
states/KickStrike/node = SubResource( 1 )
states/KickStrike/position = Vector2( 845, 176.556 )
states/KickWindup/node = SubResource( 2 )
states/KickWindup/position = Vector2( 533, 176.309 )
transitions = [ "KickWindup", "KickStrike", SubResource( 3 ), "KickStrike", "KickIdle", SubResource( 7 ), "KickIdle", "KickWindup", SubResource( 8 ), "KickWindup", "KickIdle", SubResource( 9 ) ]
start_node = "KickIdle"

[sub_resource type="AnimationNodeStateMachinePlayback" id=5]

[node name="mechleg" instance=ExtResource( 1 )]
script = ExtResource( 4 )
animationTreePath = NodePath("AnimationTree")
footColliderPath = NodePath("LegArmature/Skeleton/BoneAttachment3/FootKinematic")

[node name="BoneAttachment" parent="LegArmature/Skeleton" index="0"]
transform = Transform( 0.939828, -0.341591, -0.00626249, -0.267784, -0.747897, 0.607406, -0.212168, -0.56918, -0.794367, 5.07988e-08, 1.51752, -1.93642 )

[node name="BoneAttachment2" parent="LegArmature/Skeleton" index="1"]
transform = Transform( 0.937549, 0.347214, -0.0210709, 0.290076, -0.746958, 0.598256, 0.191984, -0.567007, -0.801028, -2.97326e-08, 1.51752, -1.93642 )

[node name="BoneAttachment3" parent="LegArmature/Skeleton" index="2"]
transform = Transform( 1, -3.72529e-09, 8.91127e-14, 1.22104e-09, 0.327789, 0.944751, -3.51948e-09, -0.944751, 0.327789, 1.44496e-10, 1.3105, -1.33975 )

[node name="FootKinematic" type="KinematicBody" parent="LegArmature/Skeleton/BoneAttachment3" index="1"]
transform = Transform( 1, 3.18027e-14, 7.70495e-14, 1.62093e-14, -0.955325, 0.295555, 5.88418e-14, -0.295555, -0.955325, -0.0025214, 0.255336, -0.104571 )
collision_layer = 0
collision_mask = 0

[node name="FootCollider" type="CollisionShape" parent="LegArmature/Skeleton/BoneAttachment3/FootKinematic" index="0"]
transform = Transform( 1, 1.51494e-14, 0, -1.41605e-14, 1, -5.68434e-14, 0, 5.68434e-14, 1, 1.61444e-09, 0.0780108, 0.110436 )
shape = SubResource( 10 )

[node name="BoneAttachment4" parent="LegArmature/Skeleton" index="3"]
transform = Transform( 1, -3.72529e-09, 8.91127e-14, 1.22104e-09, 0.327789, 0.944751, -3.51948e-09, -0.944751, 0.327789, 1.44496e-10, 1.3105, -1.33975 )

[node name="BoneAttachment5" parent="LegArmature/Skeleton" index="4"]
transform = Transform( 1, -2.84217e-14, 1.1724e-13, -1.00364e-13, -0.10602, 0.994364, 0, -0.994364, -0.10602, -8.82213e-11, 1.7834, 3.0956 )

[node name="BoneAttachment6" parent="LegArmature/Skeleton" index="5"]
transform = Transform( 1, 6.66132e-16, 4.76837e-07, -6.50572e-09, 0.999907, 0.0136435, -4.76793e-07, -0.0136435, 0.999907, 5.38896e-14, -2.52778, 3.15443 )

[node name="AnimationTree" type="AnimationTree" parent="." index="1"]
tree_root = SubResource( 4 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/playback = SubResource( 5 )
parameters/conditions/kick = false
parameters/conditions/not_windup = false
parameters/conditions/windup = false

[node name="AnimationPlayer" parent="." index="2"]
anims/KickIdle = ExtResource( 5 )
anims/KickStrike = ExtResource( 3 )
anims/KickWindup = ExtResource( 2 )
